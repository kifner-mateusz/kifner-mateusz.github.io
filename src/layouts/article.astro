---
import MainHead from "../components/MainHead.astro";
import Button from "../components/Button/index";
import Footer from "../components/Footer/index";
import Nav from "../components/Nav/index";

const { content } = Astro.props;
---

<html lang={content.lang || "en" }>

<head>
	<MainHead title={content.title} description={content.description} />

</head>

<body>
	<Nav />
	<header style={`background-image:url(${content.img})`} class="hero">
		<h1 class="title">{content.title}</h1>
	</header>
	<div class="leadIn">
		<div class="wrapper pt8 pb8 mb8 tac">
			{content.tags.map((t) => <span class="tag">{t}</span>)}
			<h3 class="tagline">{content.description}</h3>
		</div>
	</div>
	<div class="wrapper wrapper__readable">
		<div class="content">
			<slot />
		</div>
	</div>
	<footer class="tac mt6">
		<!-- <a href="/articles">
			<Button>View More</Button>
		</a> -->
	</footer>
	<Footer />
</body>

</html>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		var iframe_containers = Array.from(document.getElementsByClassName('play_iframe') as HTMLCollectionOf<HTMLElement>)
		for (let iframe of iframe_containers) {
			iframe.addEventListener('click', (e) => { load_iframe(e) });
			iframe.style.backgroundImage = "url(\'" + iframe.dataset.img + "\')";
			var new_message = document.createElement('span');
			new_message.innerText = iframe.dataset.message
			iframe.appendChild(new_message);
		}
	});

	function load_iframe(e) {
		console.log(e.currentTarget);
		var url = e.currentTarget.dataset.src
		e.currentTarget.innerHTML = "<iframe src=\"" + url + "\"></iframe>";
	}
</script>